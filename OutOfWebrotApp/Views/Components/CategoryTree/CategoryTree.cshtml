@using OutOfWebrotApp.Models.Components.TagsTree
@using OutOfWebrotApp.Models.Pages.Search
@model OutOfWebrotApp.Models.Components.TagsTree.CategoryTreeModel

<h3>Categories</h3>
<hr />

<div id="categoryTreeBox" class="col-md-12"></div>

<br/>

<script>
    $(function () {

        var params = {
            core: @Html.Raw(Model.JsonCategoryTree),
            plugins: ["checkbox"]
        };

        var tree = $('#categoryTreeBox').jstree(params);

        //$("#categoryTreeBox").on("changed.jstree",
        //    function(e, data) {
        //        var selectedNodes = data.instance.get_selected(true);
        //        var category = [];

        //        selectedNodes.forEach(function(item, i, selectedNodes) {
        //            if (item.children.length == 0) {
        //                category.push(item.id);
        //            }
        //        });
        //    });

        //$("#tagsTreeBox").on("changed.jstree",
        //    function(e, data) {
        //        var selectedNodes = data.instance.get_selected(true);
        //        var ctags = [];

        //        selectedNodes.forEach(function(item, i, selectedNodes) {
        //            if (item.children.length == 0) {
        //                ctags.push(item.id);
        //            }
        //        });

        //        var data = {
        //            title: "elm",
        //            tags: [],
        //            categories: [],
        //            page: "1"
        //        };

        //        $.ajax({
        //            type: "GET",
        //            dataType: "json",
        //            contentType: "application/json; charset=utf-8",
        //            traditional: true,
        //            url: "/api/sitecore/Posts/GetPostsPartialView/",
        //            data: data,
        //            success: function(param) {
        //                $("#postSearchresultContainer").html(param);
        //            },
        //            error: function(param) {
        //                var p = param;
        //                var i = 0;
        //            }
        //        });
        //    });
    })
</script>
